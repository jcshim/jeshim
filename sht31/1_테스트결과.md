
```
import time
from machine import I2C, Pin

# I2C0 설정 (GP20=SDA, GP21=SCL)
i2c = I2C(0, sda=Pin(20), scl=Pin(21), freq=100000)
rst_pin = Pin(22, Pin.OUT)
rst_pin.high()  # RST 핀 기본값 HIGH

# SHT31 기본 주소
SHT31_ADDR = 0x44

def sht31_reset():
    """SHT31 리셋"""
    rst_pin.low()
    time.sleep_ms(10)
    rst_pin.high()
    time.sleep_ms(50)

def read_sht31():
    """온도/습도 측정 (High Repeatability)"""
    # 측정 명령 전송 (0x2400 = High repeatability)
    i2c.writeto(SHT31_ADDR, b'\x24\x00')
    time.sleep_ms(15)  # 변환 시간 대기
    
    # 데이터 읽기 (6바이트)
    data = i2c.readfrom(SHT31_ADDR, 6)
    
    # 체크섬 검증 (선택사항)
    if data[2] != calc_checksum(data[0:2]) or data[5] != calc_checksum(data[3:5]):
        return None
    
    # 변환 공식 (데이터시트 기준)
    temp_raw = (data[0] << 8) | data[1]
    temp_c = -45 + (175 * temp_raw / 65535)
    
    hum_raw = (data[3] << 8) | data[4]
    hum_rh = 100 * hum_raw / 65535
    
    return temp_c, hum_rh

def calc_checksum(data):
    """SHT31 체크섬 계산"""
    crc = 0xFF
    for byte in data:
        crc ^= byte
        for _ in range(8):
            if crc & 0x80:
                crc = (crc << 1) ^ 0x31
            else:
                crc <<= 1
            crc &= 0xFF
    return crc

# 스캔으로 주소 확인 (선택)
print("I2C 스캔:")
devices = i2c.scan()
for addr in devices:
    print(f"발견: 0x{addr:02x}")

# 초기화
sht31_reset()
print("\nSHT31 시작")

# 무한 측정
while True:
    result = read_sht31()
    if result:
        temp, hum = result
        print(f"온도: {temp:.1f}°C | 습도: {hum:.1f}%")
    else:
        print("측정 실패")
    time.sleep(2)

```
## 손으로 잡을 때
```
>>> %Run -c $EDITOR_CONTENT

MPY: soft reboot
I2C 스캔:
발견: 0x44

SHT31 시작
온도: 48.3°C | 습도: 8.9%
온도: 48.3°C | 습도: 8.9%
<손으로 잡았을 때>
온도: 46.3°C | 습도: 11.0%
온도: 42.5°C | 습도: 37.7%
온도: 41.3°C | 습도: 52.2%
온도: 40.8°C | 습도: 59.4%
온도: 40.7°C | 습도: 63.3%
온도: 40.6°C | 습도: 65.4%
온도: 40.6°C | 습도: 66.6%
온도: 40.6°C | 습도: 67.4%
온도: 40.6°C | 습도: 68.1%
온도: 40.6°C | 습도: 68.4%
온도: 40.6°C | 습도: 68.7%
온도: 40.7°C | 습도: 69.0%
온도: 41.8°C | 습도: 54.1%
<손을 놓았을때>
온도: 42.6°C | 습도: 28.3%
온도: 43.2°C | 습도: 17.6%
온도: 43.6°C | 습도: 13.7%
온도: 44.0°C | 습도: 12.2%
온도: 44.3°C | 습도: 11.5%
온도: 44.6°C | 습도: 11.2%
온도: 44.9°C | 습도: 10.8%


```

## 창문을 열었을 때
```
>>> %Run -c $EDITOR_CONTENT

MPY: soft reboot
I2C 스캔:
발견: 0x44

SHT31 시작
온도: 46.8°C | 습도: 8.9%
온도: 46.3°C | 습도: 9.0%
온도: 45.9°C | 습도: 9.4%
온도: 45.2°C | 습도: 9.5%
온도: 43.9°C | 습도: 9.4%
온도: 43.9°C | 습도: 9.5%
온도: 43.9°C | 습도: 9.5%
온도: 43.8°C | 습도: 9.5%
온도: 43.7°C | 습도: 9.6%
온도: 43.5°C | 습도: 9.6%
온도: 43.4°C | 습도: 9.7%
온도: 43.2°C | 습도: 9.7%
온도: 43.1°C | 습도: 9.7%
온도: 42.9°C | 습도: 9.8%
온도: 42.8°C | 습도: 9.9%
온도: 42.6°C | 습도: 10.0%
온도: 42.5°C | 습도: 10.0%
온도: 42.4°C | 습도: 10.1%
온도: 42.3°C | 습도: 10.1%
온도: 42.2°C | 습도: 10.2%
온도: 42.1°C | 습도: 10.2%
온도: 42.0°C | 습도: 10.3%
온도: 41.8°C | 습도: 10.4%
온도: 41.8°C | 습도: 10.5%
온도: 41.7°C | 습도: 10.4%
온도: 41.6°C | 습도: 10.5%
온도: 41.6°C | 습도: 10.5%
온도: 41.5°C | 습도: 10.5%
온도: 41.4°C | 습도: 10.6%
온도: 41.2°C | 습도: 10.6%
온도: 41.2°C | 습도: 10.7%
온도: 41.1°C | 습도: 10.8%
온도: 41.0°C | 습도: 10.8%
온도: 40.9°C | 습도: 10.8%
온도: 40.8°C | 습도: 10.8%
```

## 드라이기를 켰을때

```
>>> %Run -c $EDITOR_CONTENT

MPY: soft reboot
I2C 스캔:
발견: 0x44

SHT31 시작
온도: 43.0°C | 습도: 11.2%
온도: 43.2°C | 습도: 11.1%
온도: 43.4°C | 습도: 11.1%
온도: 43.3°C | 습도: 11.8%
온도: 43.5°C | 습도: 11.7%
온도: 43.6°C | 습도: 11.3%
온도: 43.7°C | 습도: 11.1%
온도: 43.8°C | 습도: 11.0%
온도: 43.5°C | 습도: 10.9%
온도: 49.0°C | 습도: 10.7%
온도: 48.6°C | 습도: 9.6%
온도: 63.5°C | 습도: 7.5%
온도: 77.4°C | 습도: 4.1%
온도: 83.5°C | 습도: 3.0%
온도: 85.8°C | 습도: 2.9%
온도: 84.4°C | 습도: 3.0%
온도: 83.1°C | 습도: 3.0%
온도: 81.8°C | 습도: 3.1%
온도: 80.3°C | 습도: 3.1%
온도: 79.1°C | 습도: 3.2%
온도: 77.9°C | 습도: 3.3%
온도: 76.6°C | 습도: 3.5%
온도: 75.5°C | 습도: 3.6%
온도: 74.3°C | 습도: 3.8%
온도: 73.4°C | 습도: 3.9%
온도: 72.4°C | 습도: 3.9%
온도: 71.5°C | 습도: 4.1%
온도: 70.7°C | 습도: 4.0%
```

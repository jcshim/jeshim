```
import time
from machine import UART, Pin

# 핀 설정 (사용자 배선대로)
rst_pin = Pin(6, Pin.OUT)   # DUST_RST (GP6)
set_pin = Pin(7, Pin.OUT)   # DUST_SET (GP7)
uart = UART(1, baudrate=9600, tx=Pin(8), rx=Pin(9))  # UART1 GP8-TX, GP9-RX

def init_sensor():
    """센서 초기화 + 예열"""
    print("1. 리셋")
    rst_pin.value(0); time.sleep_ms(30); rst_pin.value(1); time.sleep_ms(200)
    
    print("2. 패시브모드")
    set_pin.value(0); time.sleep_ms(30); set_pin.value(1); time.sleep_ms(200)
    
    print("3. 명령전송")
    uart.write(b'\x42\x4D\xE1\x00\x01\x01')  # 패시브
    time.sleep(1)
    uart.write(b'\x42\x4D\xE4\x00\x01\x01')  # 액티브
    time.sleep(1)
    
    print("4. 예열 3분")
    time.sleep(180)  # 3분 필수!
    
    print("준비完了")

def read_dust():
    """먼지 데이터 읽기"""
    uart.read()  # 버퍼 클리어
    time.sleep_ms(200)
    
    if uart.any() < 32:
        return None
    
    data = bytearray(32)
    uart.readinto(data)
    
    # 헤더 + 체크섬 검증
    if (data[0] != 0x42 or data[1] != 0x4d or 
        sum(data[:30]) != (data[30] << 8) + data[31]):
        return None
    
    pm25 = data[12]*256 + data[13]  # PM2.5 (대기환경)
    pm10 = data[14]*256 + data[15]  # PM10 (대기환경)
    return pm25, pm10

# 실행
init_sensor()

print("\n=== 실시간 먼지측정 ===")
print("입김 불어보세요 (센서구멍에)")
while True:
    result = read_dust()
    if result:
        pm25, pm10 = result
        print(f"PM2.5: {pm25:3d} ug/m³ | PM10: {pm10:3d} ug/m³")
    time.sleep(3)
```


MPY: soft reboot
1. 리셋
2. 패시브모드
3. 명령전송
4. 예열 3분
준비完了

=== 실시간 먼지측정 ===
입김 불어보세요 (센서구멍에)
PM2.5:   9 ug/m³ | PM10:  10 ug/m³
PM2.5:   9 ug/m³ | PM10:   9 ug/m³
PM2.5:   8 ug/m³ | PM10:   8 ug/m³
PM2.5:  10 ug/m³ | PM10:  10 ug/m³
PM2.5:  33 ug/m³ | PM10:  36 ug/m³
PM2.5:  19 ug/m³ | PM10:  19 ug/m³
PM2.5:  15 ug/m³ | PM10:  15 ug/m³
PM2.5:  11 ug/m³ | PM10:  11 ug/m³
PM2.5:   8 ug/m³ | PM10:   9 ug/m³


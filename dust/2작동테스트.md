```
from machine import UART, Pin
import time

# 1. 핀 설정 (GP6: RST, GP7: SET, GP8: TX, GP9: RX)
rst_pin = Pin(6, Pin.OUT)
set_pin = Pin(7, Pin.OUT)

# 2. UART 설정 (UART1)
uart = UART(1, baudrate=9600, tx=Pin(8), rx=Pin(9), timeout=100)

def parse_pms7003(data):
    if len(data) < 32: return None
    # Atmospheric 환경 기준 데이터 파싱
    pm2_5 = (data[12] << 8) | data[13]
    p_03 = (data[16] << 8) | data[17]
    return pm2_5, p_03

# --- [수정된 강제 리셋 및 깨우기 시퀀스] ---
print("센서 강제 재시작 및 하드웨어 점검 중...")

# 1단계: 하드웨어 리셋 (전기적으로 완전히 껐다 켬)
rst_pin.value(0) 
time.sleep(1.0)  # 리셋 시간 확보
rst_pin.value(1) 
time.sleep(1.0)

# 2단계: 모드 전환 (Sleep -> Normal)
set_pin.value(0) # 레이저/팬 정지
print("잠시 정지(Sleep)...")
time.sleep(2.0)
set_pin.value(1) # 레이저/팬 가동
print("센서 활성화 완료. 레이저 안정화 30초 대기 중...")

# 30초 대기 (이때 팬 소리가 들리는지 확인하세요)
for i in range(30, 0, -1):
    print(f"{i}초 남음...", end="\r")
    time.sleep(1)
print("\n측정을 시작합니다. 이제 입김을 불어보세요!")

# --- [메인 루프] ---
try:
    while True:
        if uart.any() >= 32:
            buffer = uart.read(32)
            if buffer[0] == 0x42 and buffer[1] == 0x4d:
                res = parse_pms7003(buffer)
                if res:
                    pm25, c03 = res
                    # 시각적으로 변화를 잘 볼 수 있도록 출력
                    status = "STABLE" if c03 < 500 else "!!! REACTING !!!"
                    print(f"[{status}] PM2.5: {pm25} ug/m3 | 0.3um count: {c03}")
        
        time.sleep(0.5)

except KeyboardInterrupt:
    print("\n중단됨")

```
